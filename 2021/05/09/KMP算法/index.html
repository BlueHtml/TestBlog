<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>KMP算法</title>
    <meta name="description" content="KMP是一个解决模式串在文本串是否出现过，如果出现过，找出最早出现的位置的经典算法，用来解决暴力匹配算法的不足。">

    <link rel="shortcut icon" href="/favicon.png?" type="image/x-icon">
    <link rel="icon" href="/favicon.png?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="https://tb.guoqianfan.com/2021/05/09/KMP%E7%AE%97%E6%B3%95/">
    <link rel="alternate" type="application/rss+xml" title="过千帆的记事本" href="https://tb.guoqianfan.com/feed.xml ">


    <script>
    // 百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?fbc3d6124344895dc5d3439066160d3c";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>



	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-0ZVV5B1EV9"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	
	gtag('config', 'G-0ZVV5B1EV9');
	</script>



</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">过千帆的记事本</a>
        <small>记录点滴</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>Collections
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/demo/">
                        
                            <i class="fa fa-play"></i>Demo
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>KMP算法</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2021-05-09
            </div>

            <div class="label-card">
                <i class="fa fa-user"></i>逸帅-吾爱破解
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#编程" title="Category: 编程" rel="category">编程</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#%E7%AE%97%E6%B3%95" title="Tag: 算法" rel="tag">算法</a-->
        <a href="/tag/#算法" title="Tag: 算法" rel="tag">算法</a>&nbsp;
    
        <!--a href="/tag/#%E8%BD%AC%E8%BD%BD" title="Tag: 转载" rel="tag">转载</a-->
        <a href="/tag/#转载" title="Tag: 转载" rel="tag">转载</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#2kmp算法" id="markdown-toc-2kmp算法">2、KMP算法</a>    <ul>
      <li><a href="#21解决的问题" id="markdown-toc-21解决的问题">2.1、解决的问题</a></li>
      <li><a href="#22算法思路" id="markdown-toc-22算法思路">2.2、算法思路</a>        <ul>
          <li><a href="#221部分匹配表的生成" id="markdown-toc-221部分匹配表的生成">2.2.1、部分匹配表的生成</a></li>
          <li><a href="#222匹配过程" id="markdown-toc-222匹配过程">2.2.2、匹配过程</a></li>
        </ul>
      </li>
      <li><a href="#23代码实现" id="markdown-toc-23代码实现">2.3、代码实现</a></li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>转自：<a href="https://www.52pojie.cn/thread-1412249-1-1.html">https://www.52pojie.cn/thread-1412249-1-1.html</a></p>
</blockquote>

<h2 id="2kmp算法">2、KMP算法</h2>

<h3 id="21解决的问题">2.1、解决的问题</h3>

<blockquote>
  <p>KMP是一个<strong>解决模式串在文本串是否出现过</strong>，如果出现过，找出最早出现的位置的经典算法，用来解决暴力匹配算法的不足</p>
</blockquote>

<h3 id="22算法思路">2.2、算法思路</h3>

<h4 id="221部分匹配表的生成">2.2.1、部分匹配表的生成</h4>

<p>什么是<strong>前缀与后缀</strong>：</p>

<ul>
  <li>前缀：ABCD的前缀为[A, AB, ABC]</li>
  <li>后缀：ABCD的后缀为[BCD, CD, D]</li>
</ul>

<p>“部分匹配值”就是”前缀”和”后缀”的最长的共有元素的长度。以”ABCDABD”为例，</p>

<ul>
  <li>”A”的前缀和后缀都为空集，共有元素的长度为 0；</li>
  <li>”AB”的前缀为[A]，后缀为[B]，共有元素的长度为 0；</li>
  <li>”ABC”的前缀为[A, AB]，后缀为[BC, C]，共有元素的长度 0；</li>
  <li>”ABCD”的前缀为[A, AB, ABC]，后缀为[BCD, CD, D]，共有元素的长度为 0；</li>
  <li>”ABCDA”的前缀为[<strong>A</strong>, AB, ABC, ABCD]，后缀为[BCDA, CDA, DA, <strong>A</strong>]，共有元素为 <strong><em>”A”</em></strong>，<strong>长度为 1</strong>；</li>
  <li>”ABCDAB”的前缀为[A, <strong>AB,</strong> ABC, ABCD, ABCDA]，后缀为[BCDAB, CDAB, DAB, <strong>AB</strong>, B]，共有元素为 <strong><em>”AB”</em></strong>，<strong>长度为 2</strong>；</li>
  <li>”ABCDABD”的前缀为[A, AB, ABC, ABCD, ABCDA, ABCDAB]，后缀为[BCDABD, CDABD, DABD, ABD, BD,D]，共有元素的长度为 0。</li>
</ul>

<p>如下表：</p>

<p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-示例模式串.png" alt="kmp-示例模式串" /></p>

<h4 id="222匹配过程">2.2.2、匹配过程</h4>

<blockquote>
  <p>问题：假设有一个字符串 str1= BBC ABCDAB ABCDABCDABDE，和一个子串 str2=ABCDABD。现在要判断 str1 是否含有 str2, 如果存在，就返回第一次出现的位置, 如果没有，则返回-1</p>
</blockquote>

<p>步骤：</p>

<ol>
  <li>
    <p>首先，用 str1的第一个字符和 str2的<strong>第一个字符去比较，不符合，关键词向后移动一位</strong></p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-1.png" alt="kmp-1" /></p>
  </li>
  <li>
    <p>重复第一步，还是不符合，再后移</p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-2.png" alt="kmp-2" /></p>
  </li>
  <li>
    <p>一直重复，直到 Str1有一个字符与 Str2的<strong>第一个字符符合为止</strong></p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-3.png" alt="kmp-3" /></p>
  </li>
  <li>
    <p>接着比较字符串和搜索词的下一个字符，还是符合</p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-4.png" alt="kmp-4" /></p>
  </li>
  <li>
    <p>遇到 Str1有一个字符与 Str2对应的字符<strong>不符合</strong></p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-5.png" alt="kmp-5" /></p>
  </li>
  <li>
    <p>这时候不能像暴力匹配一样移动到最前面的下一个字符，因为前面的字符都匹配过了，当空格与 D 不匹配时，你其实知道前面六个字符是”ABCDAB”，这时候不要把”搜索位置”移回最前面的位置，而是根据匹配表，决定移动到哪个位置，这样就节省了效率，匹配表按照2.2.1的方法，进行计算</p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-6.png" alt="kmp-6" /></p>
  </li>
  <li>
    <p>已知空格与 D 不匹配时，前面六个字符”ABCDAB”是匹配的。查表可知，最后一个匹配字符 B 对应的”部分 匹配值”为 2， 因此按照下面的公式算出向后移动的位数：</p>

    <p>移动位数 = 已匹配的字符数 - 对应的部分匹配值，因为 6 - 2 等于 4， 所以将搜索词向后移动 4 位。</p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-7.png" alt="kmp-7" /></p>
  </li>
  <li>
    <p>此时C与空格不匹配，已经匹配的是“AB”两个字符，对应的”部分匹配值”为 0。</p>

    <p>所以，移动位数 = 2 - 0， 结果为 2， 于是将搜索词向后移 2 位</p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-8.png" alt="kmp-8" /></p>
  </li>
  <li>
    <p>继续按照字符，一个一个匹配，A与空格不匹配，后移一位，此时开始匹配</p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-9.png" alt="kmp-9" /></p>
  </li>
  <li>
    <p>逐位比较，C和D不匹配，此时前面匹配的依然是“ABCDAB”，按照前面第六步的方法，构建匹配表，可知要往后移动4位</p>

    <p><img src="https://cdn.jsdelivr.net/gh/BlueHtml/img/note/2021/05/kmp-10.png" alt="kmp-10" /></p>
  </li>
  <li>
    <p>逐位匹配，此时发现完全匹配，代表找到了。</p>
  </li>
</ol>

<h3 id="23代码实现">2.3、代码实现</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="cm">/**
 * home.php?mod=space&amp;uid=686208 yishuai
 * @description kmp算法通俗易懂版
 * home.php?mod=space&amp;uid=686237 2021/4/7 7:06 下午
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Kmp</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="nc">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="s">"BBC ABCDAB ABCDABCDABDE"</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="nc">String</span> <span class="n">str2</span> <span class="o">=</span> <span class="s">"ABCDABD"</span><span class="o">;</span>
<span class="c1">//        int[] next = getNext("ABCDABD");</span>
<span class="c1">//        System.out.println(Arrays.toString(next));</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="nc">KmpSearch</span><span class="o">(</span><span class="n">str1</span><span class="o">,</span> <span class="n">str2</span><span class="o">);</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"找到的位置是："</span><span class="o">+</span> <span class="n">i</span><span class="o">);</span>

<span class="err"> </span> <span class="err"> </span> <span class="o">}</span>

<span class="err"> </span> <span class="err"> </span> <span class="cm">/**
     * 传入一个字符串，返回字符匹配表
     * home.php?mod=space&amp;uid=952169 match 要生成匹配表的字符串
     * home.php?mod=space&amp;uid=155549 返回匹配表数组
     */</span>
<span class="err"> </span> <span class="err"> </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">getNext</span><span class="o">(</span><span class="nc">String</span> <span class="n">match</span><span class="o">){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="kt">int</span><span class="o">[]</span> <span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">match</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//第一个字符没有前缀和后缀，所以必定是0</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="n">next</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//指向字符串的头部</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span><span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//从第二个元素，开始和第一个比较</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">match</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="k">if</span> <span class="o">(</span><span class="n">match</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">!=</span> <span class="n">match</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">)){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="c1">//第一个元素和第i个元素匹配，代表前缀和后缀开始匹配</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="k">if</span> <span class="o">(</span><span class="n">match</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="n">match</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">)){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="n">next</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">++</span><span class="n">count</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="c1">//这样子匹配第一个字符后，就会匹配第二个字符</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="n">j</span><span class="o">++;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">next</span><span class="o">));</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="k">return</span> <span class="n">next</span><span class="o">;</span>
<span class="err"> </span> <span class="err"> </span> <span class="o">}</span>

<span class="err"> </span> <span class="err"> </span> <span class="cm">/**
     * kmp算法字符匹配的部分
     * @param str1 源字符串
     * @param str2 要被匹配的字符串
     */</span>
<span class="err"> </span> <span class="err"> </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">KmpSearch</span><span class="o">(</span><span class="nc">String</span> <span class="n">str1</span><span class="o">,</span><span class="nc">String</span> <span class="n">str2</span><span class="o">){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//count匹配成功的次数</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="kt">int</span> <span class="n">maxNum</span><span class="o">,</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//字符匹配数组</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="kt">int</span><span class="o">[]</span> <span class="n">next</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//首先要进行暴力匹配，比对第一个字符是否相同</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>

<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="c1">//代表第一个元素匹配上了</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="k">if</span> <span class="o">(</span><span class="n">str2</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">count</span><span class="o">)</span> <span class="o">==</span> <span class="n">str1</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">)){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="c1">//此时是进行第下个元素的匹配</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="n">count</span><span class="o">++;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="c1">//如果全部匹配上了，代表找到了，就结束</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="k">if</span><span class="o">(</span><span class="n">count</span> <span class="o">==</span> <span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//i跟着count一直往后走，所以要减去count，才是开头的位置，因为下标从0开始，所以要+1</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="k">return</span> <span class="n">i</span> <span class="o">-</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="o">}</span><span class="k">else</span> <span class="o">{</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="k">if</span> <span class="o">(</span><span class="n">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//代表没匹配成功了，此时要把匹配成功的这一段截取下来，生成字符匹配表</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="nc">String</span> <span class="n">substring</span> <span class="o">=</span> <span class="n">str2</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">count</span><span class="o">);</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="n">next</span> <span class="o">=</span> <span class="n">getNext</span><span class="o">(</span><span class="n">substring</span><span class="o">);</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="n">maxNum</span> <span class="o">=</span> <span class="n">next</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//得到最大的字符匹配</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">next</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="k">if</span> <span class="o">(</span><span class="n">next</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">maxNum</span><span class="o">){</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="n">maxNum</span> <span class="o">=</span> <span class="n">next</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//移动位数 = 已匹配的字符数 - 对应的部分匹配值</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//最后还要-1，是因为for循环的i要++</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="n">i</span> <span class="o">+=</span> <span class="n">count</span> <span class="o">-</span> <span class="n">maxNum</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="c1">//匹配次数清零</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">   </span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span> <span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">  </span> <span class="err">  </span> <span class="err"> </span><span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="o">}</span>
<span class="err"> </span> <span class="err">  </span> <span class="err">   </span><span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
<span class="err"> </span> <span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

        
        </article>
        <hr>

        
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                        
                        <h2 id="similar_posts">Similar Posts</h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="/2022/04/25/neighbor-during-omicron/">那个喊了十三声发物资的邻居
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/08/03/%E5%A6%82%E4%BD%95%E9%95%BF%E6%97%B6%E9%97%B4%E4%BF%9D%E6%8C%81%E7%90%86%E6%80%A7/">如何长时间保持理性？
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/08/02/%E5%88%B0%E5%BA%95%E5%95%A5%E6%89%8D%E6%98%AF%E5%91%BD/">到底啥才是命？
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/08/01/%E5%B0%91%E5%B9%B4%E4%B8%AD%E5%9B%BD%E8%AF%B4/">《少年中国说》梁启超
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/07/31/%E4%BA%BA%E4%B9%8B%E8%80%81%E5%B0%91/">人之老少
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                        
                        <li class="relatedPost">
                            <a href="/2021/07/20/%E5%B0%8F%E8%AF%B4%E5%86%99%E4%BD%9C%E4%B9%9F%E5%BA%94%E9%81%B5%E5%BE%AA-%E4%B8%80%E5%8D%B3%E6%98%AF%E5%85%A8-%E5%85%A8%E5%8D%B3%E6%98%AF%E4%B8%80-%E6%B3%95%E5%88%99/">小说写作也应遵循“一即是全，全即是一”法则
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>上一篇</strong> <a href="/2021/05/08/%E7%94%B5%E8%84%91%E8%BF%9E%E7%BD%91%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/">电脑连网的几种方式</a></p>
        
    </div>
    <div class="nex">

        
        <p><strong>下一篇</strong> <a href="/2021/05/10/%E5%85%B3%E4%BA%8E%E6%97%A5%E6%9C%AC%E5%A5%B3%E5%AD%A6%E7%94%9F%E7%9A%84%E8%A3%99%E5%AD%90%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/">关于日本女学生的裙子那点事儿</a></p>
        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        


<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC81Mjc1Ni8yOTIzMw==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->



    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());

document.querySelectorAll("div.highlighter-rouge[class*='language']")
    .forEach(p => p.setAttribute('data-lang', [...p.classList].find(c => c.includes("language")).split('-')[1].replace('plaintext',''))
    );
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
             存在的痕迹 
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/BlueHtml" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:gg@guoqianfan.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>         
            <a href="https://t.me/Xiao_C" title="Telegram"><i class="fa fa-telegram" aria-hidden="true"></i></a>  
            <a href="/feed.xml" title="RSS"><i class="fa fa-rss" aria-hidden="true"></i></a> 
        </p>
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
    <!-- <script src=" /js/scroll.min.js " charset="utf-8"></script> -->
  </body>

</html>
